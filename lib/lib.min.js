!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.Muta=t():e.Muta=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var i,r,o;r=[t],void 0===(o="function"===typeof(i=function(t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"get",value:function(e){var t=new XMLHttpRequest;return new Promise(function(n,i){t.open("GET",e,!0),t.onload=function(){if(t.status>=200&&t.status<400){var e=t.responseText;n(e)}else i("Server returned error code '"+t.status+"'")},t.onerror=function(){i("Server connection error.")},t.send()})}}],(i=null)&&n(t.prototype,i),r&&n(t,r),e;var t,i,r}();t.default=i,e.exports=t.default})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){var i,r,o;r=[t,n(2),n(3)],void 0===(o="function"===typeof(i=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Muta=void 0;var i=o(t),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}!function(){var e=new i.default;if(!window.pageData)return e.logError("No PageData","No page data available."),void e.endMutaGroup();var t=window.pageData.registry;new r.default(e,t),e.endMutaGroup()}(),e.Muta={Logger:i.default,ComponentRegistry:r.default}})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){var i,r,o;r=[t],void 0===(o="function"===typeof(i=function(t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initializeLogActive(),this.initializeGroupStarted()}return t=e,(i=[{key:"initializeLogActive",value:function(){var e=!0;this.isActive=function(){return e},this.activateLog=function(){e=!0},this.deactivateLog=function(){e=!1}}},{key:"initializeGroupStarted",value:function(){var e=!1;this.isGroupStarted=function(){return e},this._startGroup=function(){e=!0},this._endGroup=function(){e=!1}}},{key:"startMutaGroup",value:function(){this.isActive()&&(console.groupCollapsed("%cMuta","color: #1fbb16;"),this._startGroup())}},{key:"endMutaGroup",value:function(){this.isActive()&&(console.groupEnd(),this._endGroup())}},{key:"logError",value:function(e,t){this.isActive()&&(this.isGroupStarted()||this.startMutaGroup(),console.warn("%c"+e,"color: #e74c3c;",t))}},{key:"logInfo",value:function(e,t){this.isActive()&&(this.isGroupStarted()||this.startMutaGroup(),console.log("%c"+e,"color: #3498db;",t))}}])&&n(t.prototype,i),r&&n(t,r),e;var t,i,r}();t.default=i,e.exports=t.default})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){var i,r,o;r=[t,n(0),n(4)],void 0===(o="function"===typeof(i=function(t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=t,this.componentDefinitions={},this.components={},this.loadComponentDefinitions(n)}return t=e,(n=[{key:"loadComponentDefinitions",value:function(e){r.default.get(e).then(this.setComponentDefinitions.bind(this)).catch(this.handleError.bind(this))}},{key:"setComponentDefinitions",value:function(e){this.componentDefinitions=JSON.parse(e),this.logger&&this.logger.logInfo("Component registry loaded:",this.componentDefinitions),this.loadComponents()}},{key:"handleError",value:function(e){this.logger&&this.logger.logError("Registry Error: Load components:",e)}},{key:"loadComponents",value:function(){for(var e in this.componentDefinitions){var t=this.componentDefinitions[e],n=new o.default(this.logger,e,t);this.components[e]=n}}}])&&s(t.prototype,n),i&&s(t,i),e;var t,n,i}();t.default=u,e.exports=t.default})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){var i,r,o;r=[t,n(0),n(5)],void 0===(o="function"===typeof(i=function(t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n,this.uri=i,this.logger=t,this.logger&&this.logger.logInfo("Component initialized",this),this.onCreate()}return t=e,(n=[{key:"onCreate",value:function(){var e=this.uri,t=e+"/definition.json",n=e+"/template.html",i=e+"/template.css";Promise.all([r.default.get(t).then(this.parseComponentDefinition.bind(this)),r.default.get(n).then(this.storeTemplateHtmlData.bind(this)),r.default.get(i).then(this.storeTemplateCssData.bind(this))]).then(this.onRender.bind(this)).catch(this.handleError.bind(this))}},{key:"onRender",value:function(){this.dereferenceDocumentElements(),this.logger&&this.logger.logInfo("Component rendered",this.name)}},{key:"dereferenceDocumentElements",value:function(){for(var e=document.getElementsByTagName(this.name),t=window.pageData,n=0;n<e.length;n++){var i=e[n],r=this.dereferenceElementData(t,i,this.definition.interface);this.injectTemplateData(i,r,this.templateData)}}},{key:"parseComponentDefinition",value:function(e){return new Promise(function(t,n){this.definition=JSON.parse(e),t()}.bind(this))}},{key:"storeTemplateHtmlData",value:function(e){return new Promise(function(t,n){this.templateData=e,t()}.bind(this))}},{key:"storeTemplateCssData",value:function(e){return new Promise(function(t,n){this.cssData=e,t()}.bind(this))}},{key:"handleError",value:function(e){var t=this.logger;t&&t.logError("Component Error: OnLoad:",e)}},{key:"dereferenceElementData",value:function(e,t,n){for(var i={},r=n.length-1;r>=0;r--){var o=this.snakeToCamelCase(n[r]),a=this.dereferenceElementValue(e,t,o);i[o]=a}return i}},{key:"dereferenceElementValue",value:function(e,t,n){var i=t.dataset[n];if(0!==i.indexOf("pageData."))return i;var r=i.replace("pageData.","");return!r in e?"":e[r]}},{key:"injectTemplateData",value:function(e,t,n){var i="mu-"+this.name;this.injectComponentHtml(e,n,i);for(var r=document.querySelectorAll("[data-type='"+i+"']"),a=r.length-1;a>=0;a--){var s=r[a];o.default.bind(s,t)}}},{key:"injectComponentHtml",value:function(e,t,n){var i=this.parseHtml(t);this.cloneAttributes(e,i),i.setAttribute("data-type",n);var r=this.parseHtml("<style></style>");r.innerHTML=this.cssData,i.appendChild(r),e.outerHTML=i.outerHTML}},{key:"cloneAttributes",value:function(e,t){for(var n=e.attributes,i=n.length-1;i>=0;i--){var r=n.item(i);0!=r.name.indexOf("data-")&&t.setAttribute(r.name,r.value)}}},{key:"snakeToCamelCase",value:function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}},{key:"parseHtml",value:function(e){var t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children[0]}}])&&s(t.prototype,n),i&&s(t,i),e;var t,n,i}();t.default=u,e.exports=t.default})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){e.exports=function(){"use strict";var e=["prefix","templateDelimiters","rootInterface","preloadData","handler"],t=["binders","formatters","adapters"],n=0,i=1,r=0,o=1,a=/^'.*'$|^".*"$/;function s(e){var t=n,r=e;return a.test(e)?r=e.slice(1,-1):"true"===e?r=!0:"false"===e?r=!1:"null"===e?r=null:"undefined"===e?r=void 0:isNaN(e)?t=i:r=Number(e),{type:t,value:r}}function u(e,t){for(var n,i=e.length,a=0,s=0,u=t[0],c=t[1];s<i;){if((a=e.indexOf(u,s))<0){n&&n.push({type:r,value:e.slice(s)});break}if(n||(n=[]),a>0&&s<a&&n.push({type:r,value:e.slice(s,a)}),s=a+u.length,(a=e.indexOf(c,s))<0){var l=e.slice(s-c.length),h=n[n.length-1];h&&h.type===r?h.value+=l:n.push({type:r,value:l});break}var f=e.slice(s,a).trim();n.push({type:o,value:f}),s=a+c.length}return n}var c,l,h,f={binders:{},formatters:{},adapters:{},_prefix:"rv",_fullPrefix:"rv-",get prefix(){return this._prefix},set prefix(e){this._prefix=e,this._fullPrefix=e+"-"},parseTemplate:u,parseType:s,templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){this.call(e,t,n.view.models)},fallbackBinder:function(e,t){null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},configure:function(e){var n=this;e&&Object.keys(e).forEach(function(i){var r=e[i];t.indexOf(i)>-1?Object.keys(r).forEach(function(e){n[i][e]=r[e]}):n[i]=r})}};function d(e){return"object"===typeof e&&null!==e}var p=function(){function e(e,t,n){this.keypath=t,this.callback=n,this.objectPath=[],this.parse(),this.obj=this.getRootObject(e),d(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}e.updateOptions=function(e){c=e.adapters,l=Object.keys(c),h=e.rootInterface},e.tokenize=function(e,t){var n,i,r=[],o={i:t,path:""};for(n=0;n<e.length;n++)i=e.charAt(n),~l.indexOf(i)?(r.push(o),o={i:i,path:""}):o.path+=i;return r.push(o),r};var t=e.prototype;return t.parse=function(){var t,n;l.length||function(e){throw new Error("[Observer] "+e)}("Must define at least one adapter interface."),~l.indexOf(this.keypath[0])?(n=this.keypath[0],t=this.keypath.substr(1)):(n=h,t=this.keypath),this.tokens=e.tokenize(t,n),this.key=this.tokens.pop()},t.realize=function(){for(var e,t,n=this.obj,i=-1,r=0;r<this.tokens.length;r++)t=this.tokens[r],d(n)?("undefined"!==typeof this.objectPath[r]?n!==(e=this.objectPath[r])&&(this.set(!1,t,e,this),this.set(!0,t,n,this),this.objectPath[r]=n):(this.set(!0,t,n,this),this.objectPath[r]=n),n=this.get(t,n)):(-1===i&&(i=r),(e=this.objectPath[r])&&this.set(!1,t,e,this));return-1!==i&&this.objectPath.splice(i),n},t.sync=function(){var e,t,n;(e=this.realize())!==this.target?(d(this.target)&&this.set(!1,this.key,this.target,this.callback),d(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,((n=this.value())!==t||n instanceof Function)&&this.callback.sync()):e instanceof Array&&this.callback.sync()},t.value=function(){if(d(this.target))return this.get(this.key,this.target)},t.setValue=function(e){d(this.target)&&c[this.key.i].set(this.target,this.key.path,e)},t.get=function(e,t){return c[e.i].get(t,e.path)},t.set=function(e,t,n,i){var r=e?"observe":"unobserve";c[t.i][r](n,t.path,i)},t.unobserve=function(){for(var e,t,n=0;n<this.tokens.length;n++)t=this.tokens[n],(e=this.objectPath[n])&&this.set(!1,t,e,this);d(this.target)&&this.set(!1,this.key,this.target,this.callback)},t.getRootObject=function(e){var t,n;if(!e.$parent)return e;for(t=this.tokens.length?this.tokens[0].path:this.key.path,n=e;n.$parent&&void 0===n[t];)n=n.$parent;return n},e}(),v=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,b=/\s+/,y=function(){function e(e,t,n,i,r,o,a){this.view=e,this.el=t,this.type=n,this.keypath=i,this.binder=r,this.arg=o,this.formatters=a,this.formatterObservers={},this.model=void 0}var t=e.prototype;return t.observe=function(e,t){return new p(e,t,this)},t.parseTarget=function(){if(this.keypath){var e=s(this.keypath);0===e.type?this.value=e.value:(this.observer=this.observe(this.view.models,this.keypath),this.model=this.observer.target)}else this.value=void 0},t.parseFormatterArguments=function(e,t){var n=this;return e.map(s).map(function(e,i){var r=e.type,o=e.value;if(0===r)return o;n.formatterObservers[t]||(n.formatterObservers[t]={});var a=n.formatterObservers[t][i];return a||(a=n.observe(n.view.models,o),n.formatterObservers[t][i]=a),a.value()})},t.formattedValue=function(e){var t=this;return this.formatters.reduce(function(e,n,i){var r=n.match(v),o=r.shift(),a=t.view.options.formatters[o],s=t.parseFormatterArguments(r,i);return a&&a.read instanceof Function?e=a.read.apply(a,[e].concat(s)):a instanceof Function&&(e=a.apply(void 0,[e].concat(s))),e},e)},t.eventHandler=function(e){var t=this,n=t.view.options.handler;return function(i){n.call(e,this,i,t)}},t.set=function(e){e=e instanceof Function&&!this.binder.function?this.formattedValue(e.call(this.model)):this.formattedValue(e);var t=this.binder.routine||this.binder;t instanceof Function&&t.call(this,this.el,e)},t.sync=function(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)},t.publish=function(){var e=this;if(this.observer){var t=this.formatters.reduceRight(function(t,n,i){var r=n.split(b),o=r.shift(),a=e.view.options.formatters[o],s=e.parseFormatterArguments(r,i);return a&&a.publish&&(t=a.publish.apply(a,[t].concat(s))),t},this.getValue(this.el));this.observer.setValue(t)}},t.bind=function(){this.parseTarget(),this.binder.hasOwnProperty("bind")&&this.binder.bind.call(this,this.el),this.view.options.preloadData&&this.sync()},t.unbind=function(){var e=this;this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach(function(t){var n=e.formatterObservers[t];Object.keys(n).forEach(function(e){n[e].unobserve()})}),this.formatterObservers={}},t.update=function(e){void 0===e&&(e={}),this.observer&&(this.model=this.observer.target),this.binder.update&&this.binder.update.call(this,e)},t.getValue=function(e){return this.binder&&this.binder.getValue?this.binder.getValue.call(this,e):function(e){if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(var t,n=[],i=0;i<e.options.length;i++)(t=e.options[i]).selected&&n.push(t.value);return n}return e.value}(e)},e}(),m={routine:function(e,t){e.data=null!=t?t:""}},g=/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g,k=function e(t,n){var i=!1;if(3===n.nodeType){var r=u(n.data,f.templateDelimiters);if(r){for(var o=0;o<r.length;o++){var a=r[o],s=document.createTextNode(a.value);n.parentNode.insertBefore(s,n),1===a.type&&t.buildBinding(s,null,a.value,m,null)}n.parentNode.removeChild(n)}i=!0}else 1===n.nodeType&&(i=t.traverse(n));if(!i)for(var c=0;c<n.childNodes.length;c++)e(t,n.childNodes[c])},_=function(e,t){var n=e.binder&&e.binder.priority||0,i=t.binder&&t.binder.priority||0;return i-n},O=function(e){return e.trim()},w=function(){function e(e,t,n){e.jquery||e instanceof Array?this.els=e:this.els=[e],this.models=t,this.options=n,this.build()}var t=e.prototype;return t.buildBinding=function(e,t,n,i,r){var o=n.match(g).map(O),a=o.shift();this.bindings.push(new y(this,e,t,a,i,r,o))},t.build=function(){this.bindings=[];var e,t,n=this.els;for(e=0,t=n.length;e<t;e++)k(this,n[e]);this.bindings.sort(_)},t.traverse=function(e){for(var t,n,i,r,o=f._fullPrefix,a="SCRIPT"===e.nodeName||"STYLE"===e.nodeName,s=e.attributes,u=[],c=this.options.starBinders,l=0,h=s.length;l<h;l++){var d=s[l];if(0===d.name.indexOf(o)){if(t=d.name.slice(o.length),n=this.options.binders[t],r=void 0,!n)for(var p=0;p<c.length;p++)if(i=c[p],t.slice(0,i.length-1)===i.slice(0,-1)){n=this.options.binders[i],r=t.slice(i.length-1);break}if(n||(n=f.fallbackBinder),n.block)return this.buildBinding(e,t,d.value,n,r),e.removeAttribute(d.name),!0;u.push({attr:d,binder:n,type:t,arg:r})}}for(var v=0;v<u.length;v++){var b=u[v];this.buildBinding(e,b.type,b.attr.value,b.binder,b.arg),e.removeAttribute(b.attr.name)}return a},t.bind=function(){this.bindings.forEach(function(e){e.bind()})},t.unbind=function(){this.bindings.forEach(function(e){e.unbind()})},t.sync=function(){this.bindings.forEach(function(e){e.sync()})},t.publish=function(){this.bindings.forEach(function(e){e.binder&&e.binder.publishes&&e.publish()})},t.update=function(e){var t=this;void 0===e&&(e={}),Object.keys(e).forEach(function(n){t.models[n]=e[n]}),this.bindings.forEach(function(t){t.update&&t.update(e)})},e}(),E=["push","pop","shift","unshift","sort","reverse","splice"],j={counter:0,weakmap:{},weakReference:function(e){if(!e.hasOwnProperty("__rv")){var t=this.counter++;Object.defineProperty(e,"__rv",{value:t})}return this.weakmap[e.__rv]||(this.weakmap[e.__rv]={callbacks:{}}),this.weakmap[e.__rv]},cleanupWeakReference:function(e,t){Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length||delete this.weakmap[t]},stubFunction:function(e,t){var n=e[t],i=this.weakReference(e),r=this.weakmap;e[t]=function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];var s=n.apply(e,o);return Object.keys(i.pointers).forEach(function(e){var t=i.pointers[e];r[e]&&r[e].callbacks[t]instanceof Array&&r[e].callbacks[t].forEach(function(e){e.sync()})}),s}},observeArray:function(e,t,n){var i=this;if(e instanceof Array){var r=this.weakReference(e);r.pointers||(r.pointers={},E.forEach(function(t){i.stubFunction(e,t)})),r.pointers[t]||(r.pointers[t]=[]),-1===r.pointers[t].indexOf(n)&&r.pointers[t].push(n)}},unobserveArray:function(e,t,n){if(e instanceof Array&&null!=e.__rv){var i=this.weakmap[e.__rv];if(i){var r=i.pointers[t];if(r){var o=r.indexOf(n);o>-1&&r.splice(o,1),r.length||delete i.pointers[t],this.cleanupWeakReference(i,e.__rv)}}}},observe:function(e,t,n){var i,r=this,o=this.weakReference(e).callbacks;if(!o[t]){o[t]=[];var a=Object.getOwnPropertyDescriptor(e,t);a&&(a.get||a.set||!a.configurable)||(i=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return i},set:function(n){if(n!==i){r.unobserveArray(i,e.__rv,t),i=n;var o=r.weakmap[e.__rv];if(o){var a=o.callbacks[t];a&&a.forEach(function(e){e.sync()}),r.observeArray(n,e.__rv,t)}}}}))}-1===o[t].indexOf(n)&&o[t].push(n),this.observeArray(e[t],e.__rv,t)},unobserve:function(e,t,n){var i=this.weakmap[e.__rv];if(i){var r=i.callbacks[t];if(r){var o=r.indexOf(n);o>-1&&(r.splice(o,1),r.length||(delete i.callbacks[t],this.unobserveArray(e[t],e.__rv,t))),this.cleanupWeakReference(i,e.__rv)}}},get:function(e,t){return e[t]},set:function(e,t,n){e[t]=n}},x=function(e){return null!=e?e.toString():void 0};function C(e,t,n){var i=e.el.cloneNode(!0),r=new w(i,t,e.view.options);return r.bind(),e.marker.parentNode.insertBefore(i,n),r}var P={"on-*":{function:!0,priority:1e3,unbind:function(e){this.handler&&e.removeEventListener(this.arg,this.handler)},routine:function(e,t){this.handler&&e.removeEventListener(this.arg,this.handler),this.handler=this.eventHandler(t),e.addEventListener(this.arg,this.handler)}},"each-*":{block:!0,priority:4e3,bind:function(e){this.marker?this.iterated.forEach(function(e){e.bind()}):(this.marker=document.createComment(" tinybind: "+this.type+" "),this.iterated=[],e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e))},unbind:function(e){this.iterated&&this.iterated.forEach(function(e){e.unbind()})},routine:function(e,t){var n=this,i=this.arg;t=t||[];var r=e.getAttribute("index-property")||"$index";t.forEach(function(e,t){var o={$parent:n.view.models};o[r]=t,o[i]=e;var a=n.iterated[t];if(a)if(a.models[i]!==e){for(var s,u,c=t+1;c<n.iterated.length;c++)if((u=n.iterated[c]).models[i]===e){s=c;break}void 0!==s?(n.iterated.splice(s,1),n.marker.parentNode.insertBefore(u.els[0],a.els[0]),u.models[r]=t):u=C(n,o,a.els[0]),n.iterated.splice(t,0,u)}else a.models[r]=t;else{var l=n.marker;n.iterated.length&&(l=n.iterated[n.iterated.length-1].els[0]),a=C(n,o,l.nextSibling),n.iterated.push(a)}}),this.iterated.length>t.length&&function(e,t){for(var n=0;n<e;n++)t()}(this.iterated.length-t.length,function(){var e=n.iterated.pop();e.unbind(),n.marker.parentNode.removeChild(e.els[0])}),"OPTION"===e.nodeName&&this.view.bindings.forEach(function(e){e.el===n.marker.parentNode&&"value"===e.type&&e.sync()})},update:function(e){var t=this,n={};Object.keys(e).forEach(function(i){i!==t.arg&&(n[i]=e[i])}),this.iterated.forEach(function(e){e.update(n)})}},"class-*":function(e,t){var n=" "+e.className+" ";!t===n.indexOf(" "+this.arg+" ")>-1&&(e.className=t?e.className+" "+this.arg:n.replace(" "+this.arg+" "," ").trim())},text:function(e,t){e.textContent=null!=t?t:""},html:function(e,t){e.innerHTML=null!=t?t:""},show:function(e,t){e.style.display=t?"":"none"},hide:function(e,t){e.style.display=t?"none":""},enabled:function(e,t){e.disabled=!t},disabled:function(e,t){e.disabled=!!t},checked:{publishes:!0,priority:2e3,bind:function(e){var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener("change",this.callback)},unbind:function(e){e.removeEventListener("change",this.callback)},routine:function(e,t){"radio"===e.type?e.checked=x(e.value)===x(t):e.checked=!!t}},value:{publishes:!0,priority:3e3,bind:function(e){if(this.isRadio="INPUT"===e.tagName&&"radio"===e.type,!this.isRadio){this.event=e.getAttribute("event-name")||("SELECT"===e.tagName?"change":"input");var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener(this.event,this.callback)}},unbind:function(e){this.isRadio||e.removeEventListener(this.event,this.callback)},routine:function(e,t){if(this.isRadio)e.setAttribute("value",t);else if("select-multiple"===e.type){if(t instanceof Array)for(var n=0;n<e.length;n++){var i=e[n];i.selected=t.indexOf(i.value)>-1}}else x(t)!==x(e.value)&&(e.value=null!=t?t:"")}},if:{block:!0,priority:4e3,bind:function(e){this.marker?!1===this.bound&&this.nested&&this.nested.bind():(this.marker=document.createComment(" tinybind: "+this.type+" "+this.keypath+" "),this.attached=!1,e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)),this.bound=!0},unbind:function(){this.nested&&(this.nested.unbind(),this.bound=!1)},routine:function(e,t){!!t!==this.attached&&(t?(this.nested||(this.nested=new w(e,this.view.models,this.view.options),this.nested.bind()),this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.attached=!0):(e.parentNode.removeChild(e),this.attached=!1))},update:function(e){this.nested&&this.nested.update(e)}}};function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return(M=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=Function.bind.apply(e,i),o=new r;return n&&T(o,n.prototype),o}).apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return(N=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return M(e,arguments,A(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),T(i,e)})(e)}var L=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,o,a,s=i.prototype;return s.connectedCallback=function(){var e=this.constructor.__templateEl.content.cloneNode(!0);for(this.__tinybindView=f.bind(e,this);this.firstChild;)this.removeChild(this.firstChild);this.appendChild(e)},s.disconnectedCallback=function(){this.__tinybindView.unbind()},s.attributeChangedCallback=function(e,t,n){if(t!==n){var i=this.constructor.__propAttributeMap[e];this[i]=n}},r=i,a=[{key:"observedAttributes",get:function(){var e=this.template;if(!e)throw new Error("No template declared for "+this.name);this.__templateEl=document.createElement("template"),this.__templateEl.innerHTML=e;var t=this.__propAttributeMap={},n=[],i=this.properties;return i&&Object.keys(i).forEach(function(e){var r=i[e],o="string"===typeof r?r:e;t[o]=e,n.push(o)}),n}}],(o=null)&&D(r.prototype,o),a&&D(r,a),i}(N(HTMLElement));return f.binders=P,f.formatters={watch:function(e){return e},not:function(e){return!e},negate:function(e){return!e}},f.adapters["."]=j,f.Component=L,f.bind=function(n,i,r){var o={};i=i||{},r=r||{},t.forEach(function(e){o[e]=Object.create(null),r[e]&&Object.keys(r[e]).forEach(function(t){o[e][t]=r[e][t]}),Object.keys(f[e]).forEach(function(t){o[e][t]||(o[e][t]=f[e][t])})}),e.forEach(function(e){var t=r[e];o[e]=null!=t?t:f[e]}),o.starBinders=Object.keys(o.binders).filter(function(e){return e.indexOf("*")>0}),p.updateOptions(o);var a=new w(n,i,o);return a.bind(),a},f}()}])});
//# sourceMappingURL=lib.min.js.map
(function(){$(document).ready(function(){var t;t=function(t,i){var s,n,e,c,r,h,o,u,a,f,l;s=10,n=[0,t.width()/2+s],f=".atl-grid-item",e=function(t,i){return parseInt($(t).css(i).replace("px",""))},c=function(t){return e(t,"top")+$(t).height()},o=function(t,i){return c(t)>c(i)},r=function(t,i,s){var n,c;for(c=i-1,n=$(s).get(c);c>0;){if(Math.abs(e(n,"left")-t)<5)return n;c-=1,n=$(s).get(c)}return n},u=function(t){var i,e,h,u,l;return $(this).css("position","absolute"),$(this).width()+s>=n[1]?void a(t,$(this)):t<2?(i=t%2,$(this).css("top","0px"),void $(this).css("left",n[i]+"px")):(h=r(n[0],t,$(this).siblings(f)),e=r(n[1],t,$(this).siblings(f)),i=0,l=c(h)+s,o(h,e)&&(i=1,l=c(e)+s),u=n[i],$(this).css("top",l+"px"),void $(this).css("left",u+"px"))},a=function(t,i){var n,e;if(t<1)return $(i).css("top","0px"),void $(i).css("left","0px");n=$(i).siblings(f).get(t-1),e=c(n)+s,$(i).css("top",e+"px"),$(i).css("left","0px")},t.children(f).each(u),h=function(t,i){var e,c;return e=0,c=0,t.children(i).each(function(t){return $(this).css("left")===n[0]+"px"?c+=$(this).height()+s:e+=$(this).height()+s}),Math.max(e,c)},l=h(t,f),t.css("height",l)},$(".atl-grid").each(function(i){$(this).css("position","relative"),t($(this),{})}),$(window).resize(function(){$(".atl-grid").each(function(i){t($(this),{})})})})}).call(this);